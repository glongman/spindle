<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin
   id="com.iw.plugins.spindle.ui"
   name="Spindle UI plugin"
   version="0.1.4"
   provider-name="Intelligent Works Inc."
   class="com.iw.plugins.spindle.UIPlugin">

   <runtime>
      <library name="spindle_ui.jar"/>
      <library name="xmen.jar"/>
   </runtime>
   <requires>
      <import plugin="org.eclipse.ui.ide"/>
      <import plugin="org.eclipse.ui.views"/>
      <import plugin="org.eclipse.ui.workbench.texteditor"/>
      <import plugin="org.eclipse.ui.editors"/>
      <import plugin="com.iw.plugins.spindle.core" export="true"/>
      <import plugin="org.eclipse.jdt.ui"/>
      <import plugin="net.sf.solareclipse.ui"/>
      <import plugin="net.sf.solareclipse.xml.ui"/>
      <import plugin="org.eclipse.jdt.launching"/>
      <import plugin="org.eclipse.ui"/>
      <import plugin="org.eclipse.jface.text"/>
      <import plugin="org.eclipse.compare"/>
      <import plugin="org.eclipse.core.runtime"/>
   </requires>


   <extension
         point="org.eclipse.ui.propertyPages">
      <page
            objectClass="org.eclipse.core.resources.IProject"
            adaptable="true"
            name="Tapestry"
            class="com.iw.plugins.spindle.ui.properties.ProjectPropertyPage"
            id="CorePropertyPage">         
         <filter
               name="nature"
               value="org.eclipse.jdt.core.javanature">
         </filter>
      </page>
   </extension>   
   <!-- TODO remove no longer required
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            location="TOP_RIGHT"
            adaptable="true"
            label="Indicator for Tapestry Projects"
            state="true"
            class="com.iw.plugins.spindle.ui.decorators.ProjectDecorator"
            id="com.iw.plugins.spindle.ui.projectDecorator">
         <description>
            Indicates projects that have the Tapestry nature
         </description>
         <enablement>
            <objectClass
                  name="org.eclipse.core.resources.IProject">
            </objectClass>
         </enablement>
      </decorator>
   </extension>
   -->
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            location="TOP_RIGHT"
            adaptable="true"
            label="Indicator for the context root of Tapestry Projects"
            state="true"
            class="com.iw.plugins.spindle.ui.decorators.ContextRootDecorator"
            id="com.iw.plugins.spindle.ui.contextDecorator">
         <description>
            Indicates the path to the project&apos;s context root
         </description>
         <enablement>
            <objectClass
                  name="org.eclipse.core.resources.IFolder">
            </objectClass>
         </enablement>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            adaptable="true"
            label="Extra information for Tapestry Projects"
            state="true"
            class="com.iw.plugins.spindle.ui.decorators.ProjectInfoDecorator"
            id="com.iw.plugins.spindle.ui.projectInfoDecorator">
         <description>
            Shows the application specification, or the build state of the project
         </description>
         <enablement>
            <objectClass
                  name="org.eclipse.core.resources.IProject">
            </objectClass>
         </enablement>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer class="com.iw.plugins.spindle.PreferenceInitializer"/>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            name="Spindle 3"
            class="com.iw.plugins.spindle.ui.preferences.SpindleGeneralPreferencePage"
            id="SpindlePreferences">
      </page>
      <page
            name="Editors"
            category="SpindlePreferences"
            class="com.iw.plugins.spindle.ui.preferences.SpindleEditorPreferencePage"
            id="SpindleEditorPreferences">
      </page>
      <page
            name="Formatter"
            category="SpindlePreferences"
            class="com.iw.plugins.spindle.ui.preferences.SpindleFormatterPreferencePage"
            id="SpindleFormatterPreferences">
      </page>
      <page
            name="Templates"
            category="SpindlePreferences"
            class="com.iw.plugins.spindle.ui.preferences.TemplatesPreferencePage"
            id="SpindleTemplatePreferences">
      </page>
   </extension>
   <extension
         point="org.eclipse.jdt.ui.classpathContainerPage">
      <classpathContainerPage
            name="Tapestry Framework (plugin default)"
            class="com.iw.plugins.spindle.ui.classpath.CoreContainerWizardPage"
            id="com.iw.plugins.spindle.core.TAPESTRY_FRAMEWORK">
      </classpathContainerPage>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            name="Tapestry"
            id="com.iw.plugins.spindle.ui.new">
      </category>
      <wizard
            name="Tapestry Web Project"
            icon="./icons/full/application16.gif"
            category="com.iw.plugins.spindle.ui.new"
            class="com.iw.plugins.spindle.ui.wizards.project.NewTapestryProjectWizard"
            project="true"
            id="com.iw.plugins.spindle.ui.new_project_wizard">
         <description>
            Create a new Tapestry Web Project
         </description>
      </wizard>
      <wizard
            name="Tapestry Component"
            icon="./icons/full/component16.gif"
            category="com.iw.plugins.spindle.ui.new"
            class="com.iw.plugins.spindle.ui.wizards.NewTapComponentWizard"
            id="com.iw.plugins.spindle.ui.new_jwc_wizard">
         <description>
            Create a new Tapestry Component
         </description>
      </wizard>
      <wizard
            name="Tapestry Page"
            icon="./icons/full/page16.gif"
            category="com.iw.plugins.spindle.ui.new"
            class="com.iw.plugins.spindle.ui.wizards.NewTapPageWizard"
            id="com.iw.plugins.spindle.ui.new_page_wizard">
         <description>
            Create a new Tapestry Page
         </description>
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            name="Tapestry Template Editor"
            default="false"
            icon="./icons/full/html16.gif"
            extensions="htm,html"
            contributorClass="com.iw.plugins.spindle.editors.template.TemplateEditorContributor"
            class="com.iw.plugins.spindle.editors.template.TemplateEditor"
            id="com.iw.plugins.spindle.ui.editors.template">
      </editor>
      <editor
            name="Tapestry Spec Editor"
            default="true"
            icon="./icons/full/application16.gif"
            extensions="application, page, jwc, library"
            contributorClass="com.iw.plugins.spindle.editors.spec.SpecEditorContributor"
            class="com.iw.plugins.spindle.editors.spec.SpecEditor"
            id="com.iw.plugins.spindle.ui.editors.spec">
      </editor>
   </extension>
<!--

This is from the old Spindle. Have not decided if I will port them to
the new Spindle

      <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            objectClass="org.eclipse.jdt.core.IJavaProject"
            id="com.iw.plugins.spindle.project.popupMenus.project">
         <menu
               label="Tapestry"
               id="org.eclipse.ui.popupMenus.project.menu1">
            <separator
                  name="group1">
            </separator>
         </menu>
         <action
               label="Open Application Specification"
               class="com.iw.plugins.spindle.project.actions.JumpToApplicationSpecAction"
               menubarPath="org.eclipse.ui.popupMenus.project.menu1/group1"
               enablesFor="1"
               id="com.iw.plugins.spindle.project.popupMenus.project.JumpToTapestryProjectAction">
         </action>

      </objectContribution>
      <objectContribution
            objectClass="org.eclipse.core.resources.IFile"
            nameFilter="*.html"
            id="com.iw.plugins.spindle.popupMenus">
         <menu
               label="Spindle"
               id="com.iw.plugins.spindle.popupMenus.createComponents">
            <separator
                  name="group1">
            </separator>
         </menu>
         <action
               label="Create Tapestry Component"
               icon="icons/full/component16_dark.gif"
               class="com.iw.plugins.spindle.wizards.extra.CreateComponentFromTemplateAction"
               menubarPath="com.iw.plugins.spindle.popupMenus.createComponents/group1"
               enablesFor="+"
               id="com.iw.plugins.spindle.popupMenus.createComponents.componentFromTemplate">
         </action>
         <action
               label="Create Tapestry Page"
               icon="icons/full/page16.gif"
               class="com.iw.plugins.spindle.wizards.extra.CreatePageFromTemplateAction"
               menubarPath="com.iw.plugins.spindle.popupMenus.createComponents/group1"
               enablesFor="+"
               id="com.iw.plugins.spindle.popupMenus.createComponents.pageFromTemplate">
         </action>
      </objectContribution>
     <objectContribution
            objectClass="org.eclipse.core.resources.IFile"
            nameFilter="*.jwc"
            id="com.iw.plugins.spindle.popupMenus">
         <menu
               label="Spindle"
               id="com.iw.plugins.spindle.popupMenus.convert">
            <separator
                  name="group1">
            </separator>
         </menu>
         <action
               label="Convert to Tapestry Page (.page)"
               icon="icons/full/page16.gif"
               class="com.iw.plugins.spindle.wizards.extra.ConvertComponentIntoPageAction"
               menubarPath="com.iw.plugins.spindle.popupMenus.convert/group1"
               enablesFor="1"
               id="com.iw.plugins.spindle.popupMenus.convert.ConvertToTapestryPage">
         </action>         
      </objectContribution>

   </extension> -->
   <extension
         point="org.eclipse.ui.commands">
<!-- define a scope so that the command will work only in our editor! -->
      <scope
            name="TapestryEditorScope"
            parent="org.eclipse.ui.textEditorScope"
            description="scope for key bidings only seen by Tapestry editors"
            id="com.iw.plugins.spindle.ui.editor.commands">
      </scope>
<!-- define a format command that we will associate with the key binding Ctrl-Shift-F -->
      <command
            name="Format"
            description="Format this file"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.format">
      </command>
      <command
            name="Next Attribute"
            description="Move right/down to the next attribute"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeRight">
      </command>
      <keyBinding
            string="Ctrl+Alt+ARROW_RIGHT"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeRight"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Previous Attribute"
            description="Move left/up to the next attribute"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeLeft">
      </command>
      <keyBinding
            string="Ctrl+Alt+ARROW_LEFT"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeLeft"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Next Tag"
            description="Move down to the first attribute of the next tag"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeDown">
      </command>
      <keyBinding
            string="Ctrl+Alt+ARROW_DOWN"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeDown"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Previous Tag"
            description="Move down to the first attribute of the previous tag"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeUp">
      </command>
      <keyBinding
            string="Ctrl+Alt+ARROW_UP"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.navigate.attributeUp"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Jump to Java"
            description="Jump to the java source (if possible)"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.jump.java">
      </command>
      <keyBinding
            string="Alt+F8"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.jump.java"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Jump to Specification"
            description="Jump to the specification file (if possible)"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.jump.spec">
      </command>
      <keyBinding
            string="Alt+F7"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.jump.spec"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <keyBinding
            string="Alt+F7"
            scope="org.eclipse.jdt.ui.javaEditorScope"
            command="com.iw.plugins.spindle.ui.editor.commands.jump.spec"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Jump to Template"
            description="Jump to the template file (if possible)"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.commands.jump.template">
      </command>
      <keyBinding
            string="Alt+F6"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.jump.template"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <keyBinding
            string="Alt+F6"
            scope="org.eclipse.jdt.ui.javaEditorScope"
            command="com.iw.plugins.spindle.ui.editor.commands.jump.template"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Show Outline"
            description="Show an outline of the XML (if possible)"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.xml.show.outline">
      </command>
      <keyBinding
            string="Ctrl+O"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.xml.show.outline"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
      <command
            name="Open Structure"
            description="Open the structure of a Tapestry spec (if possible)"
            category="org.eclipse.ui.category.textEditor"
            id="com.iw.plugins.spindle.ui.editor.xml.open.structure">
      </command>
      <keyBinding
            string="Ctrl+F3"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.xml.open.structure"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
<!-- the key binding -->
      <keyBinding
            string="Ctrl+Shift+F"
            scope="com.iw.plugins.spindle.ui.editor.commands"
            command="com.iw.plugins.spindle.ui.editor.commands.format"
            configuration="org.eclipse.ui.defaultAcceleratorConfiguration">
      </keyBinding>
   </extension>
   <extension
         point="org.eclipse.ui.editorActions">
      <editorContribution
            targetID="org.eclipse.jdt.ui.CompilationUnitEditor"
            id="com.iw.plugins.spindle.ui.cu.editor.jump">
         <action
               definitionId="com.iw.plugins.spindle.ui.editor.commands.jump.spec"
               label="Jump to spec for CU editors"
               class="com.iw.plugins.spindle.editors.actions.CUEditorJumpToSpecDelegate"
               enablesFor="*"
               id="com.iw.plugins.spindle.editors.cu.jump.spec">
         </action>
         <action
               definitionId="com.iw.plugins.spindle.ui.editor.commands.jump.template"
               label="Jump to template for CU editors"
               class="com.iw.plugins.spindle.editors.actions.CUEditorJumpToTemplateDelegate"
               enablesFor="*"
               id="com.iw.plugins.spindle.editors.cu.jump.template">
         </action>
      </editorContribution>
      <editorContribution
            targetID="org.eclipse.jdt.ui.ClassFileEditor"
            id="com.iw.plugins.spindle.ui.cu.editor.jump">
         <action
               definitionId="com.iw.plugins.spindle.ui.editor.commands.jump.spec"
               label="Jump to spec for CU editors"
               class="com.iw.plugins.spindle.editors.actions.ClassFileEditorJumpToSpecDelegate"
               enablesFor="*"
               id="com.iw.plugins.spindle.editors.cu.jump.spec">
         </action>
         <action
               definitionId="com.iw.plugins.spindle.ui.editor.commands.jump.template"
               label="Jump to template for CU editors"
               class="com.iw.plugins.spindle.editors.actions.ClassFileEditorJumpToTemplateDelegate"
               enablesFor="*"
               id="com.iw.plugins.spindle.editors.cu.jump.template">
         </action>
      </editorContribution>
   </extension>
   <extension
         point="org.eclipse.ui.editors.annotationTypes">
      <type
         name="com.iw.plugins.spindle.ui.error"
         super="org.eclipse.ui.workbench.texteditor.error"
         markerType="com.iw.plugins.spindle.core.problemmarker"
         markerSeverity="2">
      </type>
      <type
         name="com.iw.plugins.spindle.ui.warning"
         super="org.eclipse.ui.workbench.texteditor.warning"
         markerType="com.iw.plugins.spindle.core.problemmarker"
         markerSeverity="1">
      </type>
      <type
         name="com.iw.plugins.spindle.ui.info"
         super="org.eclipse.ui.workbench.texteditor.info"
         markerType="com.iw.plugins.spindle.core.problemmarker"
         markerSeverity="0">
      </type>
   </extension>   
   
   <extension
         point="org.eclipse.ui.editors.templates">
        
      <contextType
            name="Application"
            class="com.iw.plugins.spindle.editors.assist.usertemplates.XMLFileContextType"
            id="com.iw.plugins.spindle.ui.templateContextType.applicationFile">
      </contextType>
     
      <contextType
            name="Library"
            class="com.iw.plugins.spindle.editors.assist.usertemplates.XMLFileContextType"
            id="com.iw.plugins.spindle.ui.templateContextType.libraryFile">
      </contextType>
      
   
      <contextType
            name="Page"
            class="com.iw.plugins.spindle.editors.assist.usertemplates.XMLFileContextType"
            id="com.iw.plugins.spindle.ui.templateContextType.pageFile">
      </contextType>
        
      
      <contextType
            name="Component"
            class="com.iw.plugins.spindle.editors.assist.usertemplates.XMLFileContextType"
            id="com.iw.plugins.spindle.ui.templateContextType.componentFile">
      </contextType>
          
      <contextType
            name="Template"
            class="com.iw.plugins.spindle.editors.assist.usertemplates.XMLFileContextType"
            id="com.iw.plugins.spindle.ui.templateContextType.templateFile">
      </contextType>
      <contextType
            name="User"
            class="com.iw.plugins.spindle.editors.assist.usertemplates.UserContextType"
            id="com.iw.plugins.spindle.ui.templateContextType.user">
      </contextType>
       <!--
      <resolver
            name="%ant.resolvers.src"
            type="src"
            icon="templates/resolver.gif"
            description="%ant.resolvers.src.description"
            contextTypeId="org.eclipse.ant.ui.templateContextType.XML"
            class="org.eclipse.ant.internal.ui.editor.templates.AntVariableResolver">
      </resolver>
      <resolver
            name="%ant.resolvers.dst"
            type="dst"
            icon="templates/resolver.gif"
            description="%ant.resolvers.dst.description"
            contextTypeId="org.eclipse.ant.ui.templateContextType.XML"
            class="org.eclipse.ant.internal.ui.editor.templates.AntVariableResolver">
      </resolver>
     -->
      <include
      		file="templates/templates.xml"
      		translations="templates/template.properties">
      </include>
   </extension>
   
   <extension
         point="org.eclipse.ui.editors.markerAnnotationSpecification">
      <specification
            annotationType="com.iw.plugins.spindle.ui.error"
            annotationImageProvider="com.iw.plugins.spindle.editors.ProblemAnnotationImageProvider">
      </specification>
      <specification
            annotationType="com.iw.plugins.spindle.ui.warning"
            annotationImageProvider="com.iw.plugins.spindle.editors.ProblemAnnotationImageProvider">
      </specification>
      <specification
            annotationType="com.iw.plugins.spindle.ui.info"
            annotationImageProvider="com.iw.plugins.spindle.editors.ProblemAnnotationImageProvider">
      </specification>
      </extension>
      
      
   
</plugin>
